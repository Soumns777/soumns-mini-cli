<script>
export default {
  onLaunch: function () {
    console.log('App Launch')
  },
  onShow: function () {
    uni.getSystemInfo({
      success: (result) => {
        // è·å–æ‰‹æœºç³»ç»Ÿçš„çŠ¶æ€æ é«˜åº¦ï¼ˆä¸åŒæ‰‹æœºçš„çŠ¶æ€æ é«˜åº¦ä¸åŒï¼‰  ï¼ˆ ä¸è¦ä½¿ç”¨uni-appå®˜æ–¹æ–‡æ¡£çš„var(--status-bar-height) å®˜æ–¹è¿™ä¸ªæ˜¯å›ºå®šçš„20px  ä¸å¯¹çš„ ï¼‰
        let statusBarHeight = result.statusBarHeight + 'px'

        // è·å–å³ä¾§èƒ¶å›Šçš„ä¿¡æ¯ å•ä½px
        const menuButtonInfo = uni.getMenuButtonBoundingClientRect()
        console.log(menuButtonInfo, 'ğŸ’™ğŸ’› menuButtonInfo')
        // bottom: èƒ¶å›Šåº•éƒ¨è·ç¦»å±å¹•é¡¶éƒ¨çš„è·ç¦»
        // height: èƒ¶å›Šé«˜åº¦
        // left:   èƒ¶å›Šå·¦ä¾§è·ç¦»å±å¹•å·¦ä¾§çš„è·ç¦»
        // right:  èƒ¶å›Šå³ä¾§è·ç¦»å±å¹•å·¦ä¾§çš„è·ç¦»
        // top:    èƒ¶å›Šé¡¶éƒ¨è·ç¦»å±å¹•é¡¶éƒ¨çš„è·ç¦»
        // width:  èƒ¶å›Šå®½åº¦
        // console.log('è®¡ç®—èƒ¶å›Šå³ä¾§è·ç¦»å±å¹•å³è¾¹è·ç¦»', result.screenWidth - menuButtonInfo.right)
        let menuWidth = menuButtonInfo.width + 'px'
        let menuHeight = menuButtonInfo.height + 'px'
        let menuBorderRadius = menuButtonInfo.height / 2 + 'px'
        let menuRight = result.screenWidth - menuButtonInfo.right + 10 + 'px'
        let menuTop = menuButtonInfo.top + 'px'
        let contentTop = result.statusBarHeight + 44 + 'px'

        let menuInfo = {
          statusBarHeight: statusBarHeight, // çŠ¶æ€æ é«˜åº¦----ç”¨æ¥ç»™è‡ªå®šä¹‰å¯¼èˆªæ¡é¡µé¢çš„é¡¶éƒ¨å¯¼èˆªæ¡è®¾è®¡padding-topä½¿ç”¨ï¼šç›®çš„ç•™å‡ºç³»ç»Ÿçš„çŠ¶æ€æ åŒºåŸŸ
          menuWidth: menuWidth, // å³ä¾§çš„èƒ¶å›Šå®½åº¦--ç”¨æ¥ç»™è‡ªå®šä¹‰å¯¼èˆªæ¡é¡µé¢çš„å·¦ä¾§èƒ¶å›Šè®¾ç½®ä½¿ç”¨
          menuHeight: menuHeight, // å³ä¾§çš„èƒ¶å›Šé«˜åº¦--ç”¨æ¥ç»™è‡ªå®šä¹‰å¯¼èˆªæ¡é¡µé¢çš„å·¦ä¾§èƒ¶å›Šè®¾ç½®ä½¿ç”¨
          menuBorderRadius: menuBorderRadius, // ä¸€åŠçš„åœ†è§’--ç”¨æ¥ç»™è‡ªå®šä¹‰å¯¼èˆªæ¡é¡µé¢çš„å·¦ä¾§èƒ¶å›Šè®¾ç½®ä½¿ç”¨
          menuRight: menuRight, // å³ä¾§çš„èƒ¶å›Šè·ç¦»å³ä¾§å±å¹•è·ç¦»--ç”¨æ¥ç»™è‡ªå®šä¹‰å¯¼èˆªæ¡é¡µé¢çš„å·¦ä¾§èƒ¶å›Šè®¾ç½®ä½¿ç”¨
          menuTop: menuTop, // å³ä¾§çš„èƒ¶å›Šé¡¶éƒ¨è·ç¦»å±å¹•é¡¶éƒ¨çš„è·ç¦»--ç”¨æ¥ç»™è‡ªå®šä¹‰å¯¼èˆªæ¡é¡µé¢çš„å·¦ä¾§èƒ¶å›Šè®¾ç½®ä½¿ç”¨
          contentTop: contentTop // å†…å®¹åŒºè·ç¦»é¡µé¢æœ€ä¸Šæ–¹çš„é«˜åº¦--ç”¨æ¥ç»™è‡ªå®šä¹‰å¯¼èˆªæ¡é¡µé¢çš„å†…å®¹åŒºå®šä½è·ç¦»ä½¿ç”¨
        }

        uni.setStorageSync('menuInfo', menuInfo)
      },
      fail: (error) => {
        console.log(error)
      }
    })
  },
  onHide: function () {
    console.log('App Hide')
  }
}
</script>

<style lang="scss">
/* æ³¨æ„è¦å†™åœ¨ç¬¬ä¸€è¡Œï¼ŒåŒæ—¶ç»™styleæ ‡ç­¾åŠ å…¥lang="scss"å±æ€§ */
@import 'uview-ui/index.scss';

* {
  margin: 0;
  padding: 0;
}
</style>
